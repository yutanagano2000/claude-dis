# 実装モード

新規実装を実行します（実装→レビュー→修正の完全フロー）。

## タスク
$ARGUMENTS

## 実行フロー

```
Gemini(設計) → Claude(実装) → Codex(レビュー) → Gemini(ヒント) → Claude(修正) → ループ
```

## 実行手順

### Step 0: Gemini 設計・コンテキスト調査

以下の形式で表示:

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔨 実装モード
タスク: [タスク内容]
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

🌐 Step 0: Gemini設計・コンテキスト調査
```

Geminiへの依頼内容:
- プロジェクト全体を読み込み
- 関連する既存ファイルの特定
- 依存関係・影響範囲の分析
- 既存パターン・規約の確認
- 実装ステップの設計
- 注意点・エッジケースの洗い出し

### Step 1: Claude 実装

```
📝 Step 1: Claude実装
```

Geminiの設計に基づいて実装:
- TDDルールに従う
- テストも作成
- 既存パターンに従う

### Step 2: Codex レビュー

```bash
codex review --uncommitted
```

結果を表示:

```
🔍 Step 2: Codexレビュー (iteration X/5)
スコア: XX/100 (Critical: X, Warning: X)
```

**判定:**
- 80点以上 → 完了（Step 5へ）
- 80点未満 → Step 3へ

### Step 3: Gemini 修正ヒント生成

```
🎯 Step 3: Gemini修正ヒント生成
```

Geminiに依頼:
- Codexの指摘をコンテキストと照合
- 本質的な問題の特定
- 具体的な修正指示の生成

### Step 4: Claude 修正

```
🔧 Step 4: Claude修正
```

Geminiのヒントを参考に修正。

修正後、Step 2 に戻る（最大5回ループ）。

### Step 5: 完了

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 完了: スコア XX/100
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## コンテキスト再調査のトリガー

以下の条件で Gemini コンテキスト調査を再実行:
1. 同スコア2回連続
2. 変更ファイルが増減
3. Codexが影響範囲に言及

## ループ制御

| 条件 | アクション |
|------|-----------|
| 80点以上 | 完了 |
| 5回ループ | 強制終了 |
| 同スコア2回連続 | Gemini深掘り分析後、継続 |

## 使用例

```
/dev ユーザー認証機能を追加して
/dev src/hooks/useAuth.ts のバグを修正して
/dev APIエンドポイント /api/users を作成して
```
